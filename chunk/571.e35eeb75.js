"use strict";(self.webpackChunkreact_web_pro=self.webpackChunkreact_web_pro||[]).push([[571],{I3Bx:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}}),n("Aeg7");var r=n("Ujd2"),a=(n("Jmwx"),n("BMrR")),i=(n("3Xp4"),n("PArb")),o=(n("MzBO"),n("2/Rp")),s=n("q1tI"),l=n("XFo0"),c=n("OeXR"),u=n("2vnA"),p=(n("doZk"),n("pwQh")),d=n("zThL"),m=n("/0+J"),f=n("FDAq"),b=n("k6Di"),h=n("79Ja"),g=n("fjcN"),y=n("o0o1"),w=n.n(y),O=n("Wgwc"),Z=n.n(O),v=n("vDqi"),D=n.n(v),P=n("Qyje"),k=n.n(P);function j(e){var t=e.status||-1e3;if(t>=200&&t<300||304===t)return e.data;var n="";switch(t){case-1:n="远程服务响应失败,请稍后重试";break;case 400:n="400：错误请求";break;case 401:n="401：访问令牌无效或已过期";break;case 403:n="403：拒绝访问";break;case 404:n="404：资源不存在";break;case 405:n="405：请求方法未允许";break;case 408:n="408：请求超时";break;case 500:n="500：访问服务失败";break;case 501:n="501：未实现";break;case 502:n="502：无效网关";break;case 503:n="503：服务不可用";break;default:n="连接错误"}return{status:t,msg:n}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=!1,L=D().create({timeout:15e3,transformRequest:[function(e){return e}],transformResponse:[function(e){return JSON.parse(e)}],headers:{"Cache-Control":"no-cache"}});L.interceptors.request.use((function(e){if(e.headers=Object.assign("get"===e.method?{Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},e.headers),"post"===e.method){var t=e.headers["Content-Type"];t&&(t.includes("multipart")||(t.includes("json")?e.data=JSON.stringify(e.data):e.data=k().stringify(e.data)))}return Promise.resolve(e)}),(function(e){return Promise.reject(e)})),L.interceptors.response.use((function(e){var t=(e.data||{}).code;return 109===t||108===t?(x||(p.ZP.warning("Connection timeout, returning to login page..."),x=!0,setTimeout((function(){p.ZP.destroy(),window.location.href="/login",x=!1}),2e3)),Promise.resolve({})):e?Promise.resolve(j(e)):void 0}),(function(e){return e.response?Promise.reject(j(e.response)):"ECONNABORTED"===e.code&&-1!==e.message.indexOf("timeout")?Promise.reject({msg:"Connection timeout"}):Promise.reject({})}));var N,C,I,q,S,z,M,R,V,A,F,Y,B,J,U,_=function(){var e=(0,m.Z)(w().mark((function e(t){var n,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=T({method:"get",ifHandleError:!0},t)).baseURL=(n.prefix,""),e.prev=2,e.next=5,L(n);case 5:return!(r=e.sent).success&&n.ifHandleError&&p.ZP.error(r.message||"Request failed！"),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(2),n.ifHandleError&&p.ZP.error(e.t0.message||e.t0.msg||"Request failed！"),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),H=_;function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=(N=u.aD.bound,C=u.aD.bound,I=u.aD.bound,q=u.aD.bound,S=u.aD.bound,z=function(){function e(){(0,b.Z)(this,e),(0,f.Z)(this,"tableData",M,this),(0,f.Z)(this,"loading",R,this),(0,f.Z)(this,"statusLoading",V,this),(0,f.Z)(this,"newModalVisible",A,this),(0,f.Z)(this,"newLoading",F,this),(0,f.Z)(this,"modalType",Y,this),(0,f.Z)(this,"modalData",B,this),(0,f.Z)(this,"pagination",J,this),(0,f.Z)(this,"searchParams",U,this)}var t,n,r;return(0,h.Z)(e,[{key:"modalTitle",get:function(){var e="Candidate";return"edit"===this.modalType?e="Edit ".concat(e):"new"===this.modalType&&(e="Add ".concat(e)),e}},{key:"setData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(t).forEach((function(t){e[t[0]]=t[1]}))}},{key:"openModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.modalType=e,this.newModalVisible=!0,this.modalData={studentId:t.studentId,firstName:t.firstName,surname:t.surname,email:t.email}}},{key:"qryTableDate",value:(r=(0,m.Z)(w().mark((function e(){var t,n,r,a,i=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:1,n=i.length>1&&void 0!==i[1]?i[1]:this.pagination.pageSize,this.loading=!0,e.next=5,H({url:"/candidates",method:"post",data:Q({page:t,size:n},this.searchParams)});case 5:(r=e.sent).success&&(a=r.data||{},this.tableData=a.listData||[],this.pagination.total=a.total,this.pagination.currentPage=t,this.pagination.pageSize=n),this.loading=!1;case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"addNew",value:(n=(0,m.Z)(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.newLoading=!0,e.next=3,H({url:"/candidates/add",method:"post",data:t});case 3:e.sent.success&&(p.ZP.success("Add successfully!"),this.newModalVisible=!1,this.qryTableDate()),this.newLoading=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"delOne",value:(t=(0,m.Z)(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.recordLoding=!0,e.next=3,H({url:"/candidates/delete",method:"post",data:{no:t}});case 3:e.sent.success&&(p.ZP.success("Delete successfully!"),this.qryTableDate()),this.recordLoding=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),M=(0,g.Z)(z.prototype,"tableData",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{studentId:"1000000",firstName:"Tony",surname:"Stark",email:"tonystark@student.unimelb.edu.au"},{studentId:"1000001",firstName:"Peter",surname:"Park",email:"peterpark@student.unimelb.edu.au"},{studentId:"1000002",firstName:"Steven",surname:"Rogers",email:"stevenrogers@student.unimelb.edu.au"}]}}),R=(0,g.Z)(z.prototype,"loading",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=(0,g.Z)(z.prototype,"statusLoading",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=(0,g.Z)(z.prototype,"newModalVisible",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=(0,g.Z)(z.prototype,"newLoading",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=(0,g.Z)(z.prototype,"modalType",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"new"}}),B=(0,g.Z)(z.prototype,"modalData",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),J=(0,g.Z)(z.prototype,"pagination",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{size:"small",pageSize:10,currentPage:1,total:0,showSizeChanger:!1,onChange:function(t,n){e.qryTableDate(t,n)},onShowSizeChange:function(t,n){e.qryTableDate(t,n)},showTotal:function(e){return"Total ".concat(e," items")}}}}),U=(0,g.Z)(z.prototype,"searchParams",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{name:void 0,gmtBegin:Z()(new Date).subtract(7,"days").format("YYYY-MM-DD"),gmtEnd:Z()(new Date).format("YYYY-MM-DD")}}}),(0,g.Z)(z.prototype,"modalTitle",[u.Fl],Object.getOwnPropertyDescriptor(z.prototype,"modalTitle"),z.prototype),(0,g.Z)(z.prototype,"setData",[N],Object.getOwnPropertyDescriptor(z.prototype,"setData"),z.prototype),(0,g.Z)(z.prototype,"openModal",[C],Object.getOwnPropertyDescriptor(z.prototype,"openModal"),z.prototype),(0,g.Z)(z.prototype,"qryTableDate",[I],Object.getOwnPropertyDescriptor(z.prototype,"qryTableDate"),z.prototype),(0,g.Z)(z.prototype,"addNew",[q],Object.getOwnPropertyDescriptor(z.prototype,"addNew"),z.prototype),(0,g.Z)(z.prototype,"delOne",[S],Object.getOwnPropertyDescriptor(z.prototype,"delOne"),z.prototype),z),K=(0,s.createContext)(new G),W=(n("Au7R"),n("UvIb")),$=(n("bm40"),n("JeLf")),ee=(n("8Gwt"),n("I/+N")),te=n("Vadf"),ne=(0,c.Pi)((function(){var e=s.useContext(K),t=(0,u.ZN)(e.modalData),n=ee.Z.useForm(),r=(0,te.Z)(n,1)[0];return s.createElement(W.Z,{className:"candidate-modal",title:e.modalTitle,visible:e.newModalVisible,onOk:function(){r.validateFields().then((function(t){e.addNew(t)}))},okText:"Confirm",onCancel:function(){return e.setData({newModalVisible:!1})},cancelText:"Cancel",okButtonProps:{loading:e.newLoading}},s.createElement(ee.Z,{labelCol:{span:6},wrapperCol:{span:12},form:r},s.createElement(ee.Z.Item,{label:"Student ID",name:"studentId",initialValue:t.studentId,rules:[{required:!0,whitespace:!0,message:"Please input student id"}]},s.createElement($.Z,{maxLength:64})),s.createElement(ee.Z.Item,{label:"First Name",name:"firstName",initialValue:t.firstName,rules:[{required:!0,whitespace:!0,message:"Please input first name"}]},s.createElement($.Z,{maxLength:64})),s.createElement(ee.Z.Item,{label:"Surname",name:"surname",initialValue:t.surname,rules:[{required:!0,whitespace:!0,message:"Please input surname"}]},s.createElement($.Z,{maxLength:64})),s.createElement(ee.Z.Item,{label:"Email",name:"email",initialValue:t.email,rules:[{required:!0,whitespace:!0,message:"Please input email"}]},s.createElement($.Z,{maxLength:64}))))})),re=(0,c.Pi)((function(){var e=s.useContext(K);(0,s.useEffect)((function(){e.qryTableDate()}),[]);var t=(0,s.useMemo)((function(){return[{title:"Student ID",dataIndex:"studentId",ellipsis:!0},{title:"First Name",dataIndex:"firstName",ellipsis:!0},{title:"Surname",dataIndex:"surname",ellipsis:!0},{title:"Email",dataIndex:"email",ellipsis:!0},{title:"Operations",dataIndex:"operations",width:150,render:function(t,n){return s.createElement(a.Z,{type:"flex",align:"middle",className:"operation"},s.createElement(o.Z,{type:"link",disabled:n.status,onClick:function(){return e.openModal("edit",n)}},"Edit"),s.createElement(i.Z,{type:"vertical"}),s.createElement(o.Z,{type:"link",disabled:n.status,onClick:function(){return e.delOne(n)},loading:e.recordLoding},"Delete"))}}]}),[e]);return s.createElement("div",{className:"page-candidates page-content"},s.createElement(o.Z,{type:"primary",icon:s.createElement(l.Z,null),onClick:function(){return e.openModal("new")}},"Import"),s.createElement(r.Z,{style:{paddingTop:"20px"},loading:e.loading,columns:t,dataSource:(0,u.ZN)(e.tableData),rowKey:"studentId",pagination:(0,u.ZN)(e.pagination)}),s.createElement(ne,null))}))}}]);